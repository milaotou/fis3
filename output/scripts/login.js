$(function(){var t={init:function(){that=this,that.get_yzm(),that.yuyin_yzm(),that.login()},get_yzm:function(){$("#get_yzm").bind("click",function(){var t=$(this),e=$.trim($("#phone").val()),n=new RegExp(/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/);if(!e.match(n))return warnAlert("请输入正确的手机号"),!1;if("获取验证码"==t.text())var r=60,a=setInterval(function(){0==r?(t.attr("disabled",!1),t.removeClass("btn-gray").addClass("btn-blue").text("获取验证码"),r=60,clearInterval(a)):(t.removeClass("btn-blue").addClass("btn-gray").text(r+"秒"),t.attr("disabled",!0),r--)},1e3);$.ajax({type:"post",url:"/dsbapi/v2/user/getVerificationCode",data:{mobile:e,send_type:"1"},dataType:"json",success:function(t){"200"==t.error_code||"0"==t.error_code&&warnAlert(t.msg)},error:function(){warnAlert("抱歉，系统发生错误")}})})},yuyin_yzm:function(){$("#yuyin_yzm").bind("click",function(){var t=$.trim($("#phone").val()),e=new RegExp(/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/);return t.match(e)?void $.ajax({type:"post",url:"/dsbapi/v2/user/getVerificationCode",data:{mobile:t,send_type:"2"},dataType:"json",success:function(t){"200"==t.error_code||"0"==t.error_code&&warnAlert(t.msg)},error:function(){warnAlert("抱歉，系统发生错误")}}):(warnAlert("请输入正确的手机号"),!1)})},login:function(){$("#login").click(function(){var t=$("#phone").val(),e=$("#yzm").val(),n=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/;ifNotNull(t)?t.match(n)?ifNotNull(e)?e.match(/^\d{4}$/)?$.ajax({type:"post",url:"/dsbapi/v2/user/doLogin",data:{mobile:t,code:e},dataType:"json",success:function(t){warnAlert(t.msg)},error:function(){warnAlert("抱歉，系统发生错误")}}):warnAlert("请输入有效的验证码"):warnAlert("验证码不能为空"):warnAlert("请输入正确的手机号"):warnAlert("手机号不能为空")})}};t.init()});